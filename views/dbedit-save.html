{% extends _cms.conf.adminTemplate %}

{% block content %}
{{super()}}

<a href="{{redirectAfter}}"  class="btn btn-default">Back</a>
<br/><br/>

<form method="post">
  <input type="hidden" name="_csrf" value="{{_csrf}}" />
  <input type="hidden" name="_id" value="{{rec._id}}" />
  <input type="hidden" name="modelName" value="{{modelAttr.name}}" />
  <input type="hidden" name="redirectAfter" value="{{redirectAfter}}" />

{%for attr, dbCol in modelAttr.schema%}
  
  <div class="form-group">
      <label>{{dbCol.dbeditDisplay}}</label>

    {%if readOnlyMap[attr]%}
      {%marked%}{{rec[attr]}}{%endmarked%}
    {%else%}
      <input class="form-control" name="{{attr}}" value="{{rec[attr]}}">
    {%endif%}
  </div>

{%endfor%}

  <button type="submit" class="btn btn-primary">Save</button>

  {%if rec._id%}
  <a href="/admin/dbedit/delete?_id={{rec._id}}&model={{modelAttr.name}}&redirectAfter={{redirectAfter}}" class="btn btn-danger" onclick="return confirm('Do you want to delete this record?')" style="float:right;">Delete</a>
  {%endif%}

</form>

{% endblock %}